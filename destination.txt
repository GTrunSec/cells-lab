let MyConfig = {
  path | doc "{{ var }}"
       | Str,

  connection | {
    server_port | Port,
    host | Str,
  }
}
in

{
  path = "/foo/bar",
  connection = {
    server_port =
      if host == "localhost" then
        8080
      else
        80,
    host = "localhost",
  }
} | MyConfig
